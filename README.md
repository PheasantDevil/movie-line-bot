# ğŸ¬ æ˜ ç”»æƒ…å ±é€šçŸ¥ LINE Bot

æ—¥æœ¬å›½å†…ã®æ–°ä½œæ˜ ç”»æƒ…å ±ã‚’è‡ªå‹•ã§é€šçŸ¥ã™ã‚‹LINE Botã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

[![GitHub Actions](https://img.shields.io/badge/GitHub%20Actions-enabled-brightgreen)](https://github.com/features/actions)
[![Python](https://img.shields.io/badge/Python-3.11+-blue)](https://www.python.org/)
[![LINE](https://img.shields.io/badge/LINE-Messaging%20API-00C300)](https://developers.line.biz/)

## ğŸ“ æ¦‚è¦

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€æ˜ ç”».comã‹ã‚‰æœ€æ–°ã®æ˜ ç”»æƒ…å ±ã‚’å–å¾—ã—ã€æ–°ä½œæ˜ ç”»ãŒè¿½åŠ ã•ã‚ŒãŸéš›ã«LINEçµŒç”±ã§è‡ªå‹•é€šçŸ¥ã‚’è¡Œã„ã¾ã™ã€‚

**ä¸»ãªæ©Ÿèƒ½:**
- âœ… æ˜ ç”».comã‹ã‚‰ä»Šé€±å…¬é–‹ã®æ˜ ç”»æƒ…å ±ã‚’è‡ªå‹•å–å¾—
- âœ… å‰å›ã¨ã®å·®åˆ†ã‚’æ¤œçŸ¥ã—ã¦æ–°ä½œæ˜ ç”»ã®ã¿ã‚’é€šçŸ¥
- âœ… LINE Messaging APIã§è‡ªå‹•é€šçŸ¥
- âœ… GitHub Actionsã§æ¯æ—¥è‡ªå‹•å®Ÿè¡Œ
- âœ… å®Œå…¨ç„¡æ–™ã§é‹ç”¨å¯èƒ½ï¼ˆç„¡æ–™æ å†…ï¼‰

### é€šçŸ¥å†…å®¹

- ğŸ¬ **ã‚¿ã‚¤ãƒˆãƒ«**
- ğŸ“… **å…¬é–‹æ—¥**
- ğŸ”— **ä½œå“è©³ç´°URL**ï¼ˆæ˜ ç”».comã¸ã®ãƒªãƒ³ã‚¯ï¼‰

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å¿…è¦ãªã‚‚ã®

- GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- LINEã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- LINE Developers ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆç„¡æ–™ï¼‰

### 1. ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ•ã‚©ãƒ¼ã‚¯/ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
git clone https://github.com/your-username/movie-line-bot.git
cd movie-line-bot
```

### 2. LINE Messaging API ã®è¨­å®š

#### 2.1 LINE Developersã§ãƒãƒ£ãƒãƒ«ã‚’ä½œæˆ

1. [LINE Developers Console](https://developers.line.biz/console/)ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ãƒ­ã‚°ã‚¤ãƒ³å¾Œã€**ã€Œæ–°è¦ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã€**ã‚’ä½œæˆ
3. **ã€ŒMessaging APIã€**ãƒãƒ£ãƒãƒ«ã‚’ä½œæˆ
   - ãƒãƒ£ãƒãƒ«å: ä¾‹ï¼‰æ˜ ç”»æƒ…å ±Bot
   - ãƒãƒ£ãƒãƒ«èª¬æ˜: ä¾‹ï¼‰æ–°ä½œæ˜ ç”»æƒ…å ±ã‚’é€šçŸ¥ã™ã‚‹Bot
   - ã‚«ãƒ†ã‚´ãƒª: é©åˆ‡ãªã‚‚ã®ã‚’é¸æŠ

#### 2.2 ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã®å–å¾—

1. ä½œæˆã—ãŸãƒãƒ£ãƒãƒ«ã®ã€ŒMessaging APIè¨­å®šã€ã‚¿ãƒ–ã‚’é–‹ã
2. **ã€Œãƒãƒ£ãƒãƒ«ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã€**ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã€Œç™ºè¡Œã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. è¡¨ç¤ºã•ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ä¿å­˜ï¼ˆå¾Œã§ä½¿ç”¨ï¼‰

#### 2.3 LINE User IDã®å–å¾—

**æ–¹æ³•1: LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’å‹ã ã¡è¿½åŠ ã—ã¦ç¢ºèª**

1. ãƒãƒ£ãƒãƒ«ã®QRã‚³ãƒ¼ãƒ‰ã‹ã‚‰è‡ªåˆ†ã®LINEã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§å‹ã ã¡è¿½åŠ 
2. ä»¥ä¸‹ã®Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ç¢ºèªï¼ˆä¸€æ™‚çš„ã«Webhook URLã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼‰

**æ–¹æ³•2: ç°¡æ˜“çš„ãªæ–¹æ³•**

LINE Botã«ä½•ã‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã£ã¦ã€Webhookãƒ­ã‚°ã‹ã‚‰ç¢ºèªã™ã‚‹æ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ãŒã€
æœ€ã‚‚ç°¡å˜ãªã®ã¯ã€[LINE Official Account Manager](https://manager.line.biz/)ã§ç¢ºèªã™ã‚‹ã“ã¨ã§ã™ã€‚

### 3. GitHubãƒªãƒã‚¸ãƒˆãƒªã«Secretã‚’è¨­å®š

1. GitHubãƒªãƒã‚¸ãƒˆãƒªã®ãƒšãƒ¼ã‚¸ã§ **Settings** > **Secrets and variables** > **Actions** ã‚’é–‹ã
2. **ã€ŒNew repository secretã€**ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä»¥ä¸‹ã‚’è¿½åŠ ï¼š

   **Secret 1:**
   - Name: `LINE_CHANNEL_ACCESS_TOKEN`
   - Value: å…ˆã»ã©å–å¾—ã—ãŸãƒãƒ£ãƒãƒ«ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³

   **Secret 2:**
   - Name: `LINE_USER_ID`
   - Value: å–å¾—ã—ãŸLINE User IDï¼ˆä¾‹: U1234567890abcdef...ï¼‰

### 4. GitHub Actionsã‚’æœ‰åŠ¹åŒ–

1. ãƒªãƒã‚¸ãƒˆãƒªã® **Actions** ã‚¿ãƒ–ã‚’é–‹ã
2. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æœ‰åŠ¹åŒ–ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
3. æ‰‹å‹•ã§å®Ÿè¡Œã—ã¦ãƒ†ã‚¹ãƒˆï¼š
   - ã€Œæ˜ ç”»æƒ…å ±ãƒã‚§ãƒƒã‚¯ & LINEé€šçŸ¥ã€ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’é¸æŠ
   - **ã€ŒRun workflowã€**ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
   - ãƒ–ãƒ©ãƒ³ãƒã‚’é¸æŠã—ã¦å®Ÿè¡Œ

### 5. ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®å®Ÿè¡Œï¼ˆä»»æ„ãƒ»é–‹ç™ºç”¨ï¼‰

```bash
# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt

# ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
export LINE_CHANNEL_ACCESS_TOKEN="your_token_here"
export LINE_USER_ID="your_user_id_here"

# å®Ÿè¡Œ
python src/main.py
```

## ğŸ”„ è‡ªå‹•å®Ÿè¡Œã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

GitHub Actionsã«ã‚ˆã‚Šã€ä»¥ä¸‹ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã§è‡ªå‹•å®Ÿè¡Œã•ã‚Œã¾ã™ï¼š

- **å®šæœŸå®Ÿè¡Œ**: æ¯æ—¥æ—¥æœ¬æ™‚é–“ã®åˆå‰9æ™‚ï¼ˆUTC 0æ™‚ï¼‰
- **æ‰‹å‹•å®Ÿè¡Œ**: GitHubã®Actionsãƒšãƒ¼ã‚¸ã‹ã‚‰ã„ã¤ã§ã‚‚å®Ÿè¡Œå¯èƒ½

### å®Ÿè¡Œã®æµã‚Œ

1. æ˜ ç”».comã‹ã‚‰ä»Šé€±å…¬é–‹ã®æ˜ ç”»æƒ…å ±ã‚’å–å¾—
2. å‰å›ä¿å­˜ã—ãŸãƒ‡ãƒ¼ã‚¿ã¨æ¯”è¼ƒ
3. æ–°ä½œæ˜ ç”»ãŒã‚ã‚Œã°LINEã«é€šçŸ¥
4. æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’GitHubã«è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆ

### é€šçŸ¥ã®ä¾‹

```
ğŸ¬ æ–°ä½œæ˜ ç”»æƒ…å ± (3ä»¶)
==============================

ã€1ã€‘æ˜ ç”»ã‚¿ã‚¤ãƒˆãƒ«1
ğŸ“… å…¬é–‹æ—¥: 10æœˆ10æ—¥
ğŸ”— https://eiga.com/movie/12345/

ã€2ã€‘æ˜ ç”»ã‚¿ã‚¤ãƒˆãƒ«2
ğŸ“… å…¬é–‹æ—¥: 10æœˆ11æ—¥
ğŸ”— https://eiga.com/movie/12346/

ã€3ã€‘æ˜ ç”»ã‚¿ã‚¤ãƒˆãƒ«3
ğŸ“… å…¬é–‹æ—¥: 10æœˆ12æ—¥
ğŸ”— https://eiga.com/movie/12347/
```

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
movie-line-bot/
â”œâ”€â”€ .github/workflows/    # GitHub Actionsè¨­å®š
â”œâ”€â”€ src/                  # ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
â”œâ”€â”€ data/                 # æ˜ ç”»ãƒ‡ãƒ¼ã‚¿ä¿å­˜
â”œâ”€â”€ requirements.txt      # Pythonä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
â””â”€â”€ README.md            # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

## ğŸ’° ã‚³ã‚¹ãƒˆ

- GitHub Actions: ç„¡æ–™æ å†…
- LINE Messaging API: ç„¡æ–™æ å†…ï¼ˆ1,000é€š/æœˆï¼‰
- **ç·ã‚³ã‚¹ãƒˆ: Â¥0/æœˆ**

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## ğŸ› ï¸ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### LINEé€šçŸ¥ãŒå±Šã‹ãªã„

1. GitHub SecretsãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
2. LINE Botã‚’å‹ã ã¡è¿½åŠ ã—ã¦ã„ã‚‹ã‹ç¢ºèª
3. GitHub Actionsã®ãƒ­ã‚°ã‚’ç¢ºèªï¼ˆActionsã‚¿ãƒ–ï¼‰

### ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒå¤±æ•—ã™ã‚‹

1. Actionsã‚¿ãƒ–ã§ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ç¢ºèª
2. Pythonã®ä¾å­˜é–¢ä¿‚ãŒæ­£ã—ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
3. æ˜ ç”».comã®HTMLæ§‹é€ ãŒå¤‰æ›´ã•ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ï¼ˆãã®å ´åˆã¯ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ‘ãƒ¼ã®ä¿®æ­£ãŒå¿…è¦ï¼‰

### ãƒ‡ãƒ¼ã‚¿ãŒæ›´æ–°ã•ã‚Œãªã„

1. GitHub Actionsã«æ›¸ãè¾¼ã¿æ¨©é™ãŒã‚ã‚‹ã‹ç¢ºèª
   - Settings > Actions > General > Workflow permissions
   - "Read and write permissions" ã‚’é¸æŠ

## ğŸ“Š ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
movie-line-bot/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ check-movies.yml    # GitHub Actionsãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
â”‚       â””â”€â”€ README.md            # ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼èª¬æ˜
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py                  # ãƒ¡ã‚¤ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”œâ”€â”€ scraper.py               # æ˜ ç”»æƒ…å ±ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°
â”‚   â”œâ”€â”€ storage.py               # ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–
â”‚   â”œâ”€â”€ diff_detector.py         # å·®åˆ†æ¤œçŸ¥
â”‚   â””â”€â”€ line_notifier.py         # LINEé€šçŸ¥
â”œâ”€â”€ data/
â”‚   â””â”€â”€ movies.json              # æ˜ ç”»ãƒ‡ãƒ¼ã‚¿ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
â”œâ”€â”€ requirements.txt             # Pythonä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

## ğŸ”§ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### å®Ÿè¡Œæ™‚åˆ»ã®å¤‰æ›´

`.github/workflows/check-movies.yml` ã® cron è¨­å®šã‚’å¤‰æ›´ï¼š

```yaml
schedule:
  - cron: '0 0 * * *'  # UTC 0æ™‚ = JST 9æ™‚
```

### é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

`src/line_notifier.py` ã® `_format_movie_message()` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç·¨é›†

### ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å¯¾è±¡ã®å¤‰æ›´

`src/scraper.py` ã® `BASE_URL` ã‚„ãƒ‘ãƒ¼ã‚¹å‡¦ç†ã‚’ç·¨é›†

## ğŸ¤ è²¢çŒ®

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚„ Issue ã®ä½œæˆã‚’æ­“è¿ã—ã¾ã™ï¼

### é–‹ç™ºã®æµã‚Œ

1. ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ•ã‚©ãƒ¼ã‚¯
2. ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ (`git checkout -b feature/amazing-feature`)
3. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ (`git commit -m 'Add some amazing feature'`)
4. ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ (`git push origin feature/amazing-feature`)
5. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆ

